# 大文件上传

浏览器上传较大的文件时，会遇到容易崩溃或因网络不稳定导致中断等问题，前端目前主流的大文件上传解决方案是分段上传，即将文件拆分成多个片段，分别上传，最后再合并。

## 分段上传

1. 前端计算出文件的 `md5` 作为文件的标识。
2. 前端通过 `File.slice` 将文件拆分成多个片段，每个片段对应一个序号 `file index`，单独上传。
3. 后段接收到文件后，将文件存至 `/<md5>/<file index>`。
4. 所有片段上传完成后，前端向后端发送一个合并文件的请求，后端根据请求将 `/<md5>/` 下的所有文件按序号合并成最终要上传的文件，并验证 md5。

## 断点续传

断点续传有两种记录断点的方式，一种是由前端记录每个文件片段是否已经上传完成，一种是由后端提供的接口判断文件片段是否已经上传，然后对于未上传的文件片段，重新上传。


## 运行项目

使用以下命令运行前端，并通过 `http://localhost:8006/` 访问

```bash
npm run start
```

后端使 NodeJS 提供上传文件的 API 接口。

```bash
npm run testServe
```
